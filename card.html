<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Void Reactor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap');
        :root { --neon-blue: #00f3ff; --neon-red: #ff0055; --base-width: 360px; --base-height: 520px; }
        body { margin: 0; height: 100vh; background: #050505 radial-gradient(circle at 50% 50%, #1a1a2e 0%, #000 70%); display: flex; justify-content: center; align-items: center; font-family: 'Rajdhani', sans-serif; overflow: hidden; perspective: 1200px; }
        
        #scaler { transform-origin: center center; width: var(--base-width); height: var(--base-height); position: relative; }
        .card-scene { width: 100%; height: 100%; transform-style: preserve-3d; }
        .card { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; border-radius: 20px; background: rgba(10, 10, 15, 0.6); box-shadow: 0 0 0 1px rgba(255,255,255,0.3), 0 30px 60px rgba(0,0,0,0.6); transition: transform 0.1s; }
        
        .layer-portal, .layer-holo, #physics-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 20px; pointer-events: none; }
        .layer-portal { transform: translateZ(-40px); overflow: hidden; }
        .portal-grid { position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background-image: linear-gradient(rgba(255,255,255,0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.3) 1px, transparent 1px); background-size: 40px 40px; transform: perspective(500px) rotateX(60deg); opacity: 0.15; }
        .portal-glow { position: absolute; top: 50%; left: 50%; width: 300px; height: 300px; background: radial-gradient(circle, var(--neon-blue) 0%, transparent 70%); transform: translate(-50%, -50%); opacity: 0.3; mix-blend-mode: screen; animation: pulse 4s infinite alternate; }
        
        #physics-canvas { transform: translateZ(10px); }
        .layer-holo { background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0) 30%, rgba(255,0,255,0.3) 45%, rgba(0,255,255,0.3) 50%, rgba(255,255,0,0.3) 55%, transparent 100%); background-size: 300% 300%; mix-blend-mode: color-dodge; opacity: 0.6; transform: translateZ(30px); }
        
        .layer-ui { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform: translateZ(40px); color: white; pointer-events: none; }
        .top-bar { position: absolute; top: 25px; left: 25px; right: 25px; display: flex; justify-content: space-between; }
        .h-tag { font-family: 'Orbitron'; font-size: 10px; border: 1px solid var(--neon-blue); padding: 4px 8px; color: var(--neon-blue); background: rgba(0,0,0,0.5); }
        .main-title { position: absolute; top: 120px; left: 25px; }
        .main-title h1 { font-family: 'Orbitron'; font-weight: 900; font-size: 40px; line-height: 0.9; margin: 0; text-shadow: 0 5px 15px rgba(0,0,0,0.5); background: linear-gradient(to right, #fff, var(--neon-blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .control-area { position: absolute; bottom: 25px; left: 25px; right: 25px; background: rgba(0,0,0,0.7); backdrop-filter: blur(12px); padding: 15px 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.15); pointer-events: auto; z-index: 100; }
        
        input[type="range"] { -webkit-appearance: none; width: 100%; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px; outline: none; margin-top: 10px; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; background: var(--neon-blue); border-radius: 50%; box-shadow: 0 0 10px var(--neon-blue); transition: transform 0.2s; }
        
        .card.danger-mode { animation: shake 0.2s infinite; border-color: var(--neon-red); box-shadow: 0 0 20px var(--neon-red); }
        .card.danger-mode .h-tag { border-color: var(--neon-red); color: var(--neon-red); }
        
        #shatter-container { position: absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; }
        .shard { position: absolute; background: rgba(255,255,255,0.9); box-shadow: 0 0 10px var(--neon-blue); }
        .reboot-screen { position: absolute; top:0; left:0; width:100%; height:100%; background: #000; display: flex; justify-content: center; align-items: center; z-index: 200; opacity: 0; pointer-events: none; transition: opacity 0.5s; color: white; font-family: 'Orbitron'; }
        .reboot-screen.visible { opacity: 1; pointer-events: auto; }
        
        @keyframes pulse { to { transform: translate(-50%,-50%) scale(1.2); opacity: 0.6; } }
        @keyframes shake { 0% { transform: translate(1px, 1px); } 50% { transform: translate(-1px, -1px); } 100% { transform: translate(0, 2px); } }
    </style>
</head>
<body>
    <div id="scaler">
        <div class="card-scene" id="scene">
            <div class="card" id="card">
                <div class="layer-portal"><div class="portal-grid" id="portal-grid"></div><div class="portal-glow"></div></div>
                <canvas id="physics-canvas"></canvas>
                <div class="layer-holo" id="holo-foil"></div>
                <div id="shatter-container"></div>
                <div class="layer-ui">
                    <div class="top-bar"><div class="h-tag">VOID INC.</div><div class="h-tag" id="status-tag">STABLE</div></div>
                    <div class="main-title"><h1>REACTOR<br>CORE</h1><p>QUANTUM SINGULARITY</p></div>
                    <div class="control-area">
                        <div style="display:flex; justify-content:space-between; font-size:11px; color:var(--neon-blue); font-weight:700;"><span>ENERGY LEVEL</span><span id="energy-val">20%</span></div>
                        <input type="range" id="slider" min="0" max="100" value="20">
                    </div>
                </div>
            </div>
            <div class="reboot-screen" id="reboot-screen"><p>REBOOTING SYSTEM...</p></div>
        </div>
    </div>
    <script>
        const card = document.getElementById('card'), scene = document.getElementById('scene'), foil = document.getElementById('holo-foil'), grid = document.getElementById('portal-grid');
        const slider = document.getElementById('slider'), statusTag = document.getElementById('status-tag'), reboot = document.getElementById('reboot-screen');
        let destroyed = false, unstable = false;
        
        // 1. 缩放适配
        function fit() { const s = Math.min((window.innerWidth-20)/360, (window.innerHeight-20)/520, 1.1); document.getElementById('scaler').style.transform = `scale(${s})`; }
        window.addEventListener('resize', fit); fit();

        // 2. 物理引擎
        const {Engine, Render, World, Bodies, Runner, Body} = Matter;
        const engine = Engine.create(), canvas = document.getElementById('physics-canvas');
        const render = Render.create({ canvas, engine, options: { width: 360, height: 520, background: 'transparent', wireframes: false } });
        const floorY = 520 - 90; // 隐形地板
        World.add(engine.world, [
            Bodies.rectangle(180, floorY+25, 360, 50, {isStatic:true, render:{visible:false}}),
            Bodies.rectangle(180, -25, 360, 50, {isStatic:true}),
            Bodies.rectangle(385, 260, 50, 520, {isStatic:true}),
            Bodies.rectangle(-25, 260, 50, 520, {isStatic:true})
        ]);
        const particles = []; const colors = ['#00f3ff', '#bc13fe', '#fff'];
        for(let i=0; i<20; i++) particles.push(Bodies.circle(Math.random()*360, Math.random()*200, Math.random()*6+4, {restitution:0.9, render:{fillStyle:colors[i%3]}}));
        World.add(engine.world, particles);
        Runner.run(Runner.create(), engine); Render.run(render);

        // 3. 交互 (鼠标+触摸)
        function move(x, y) {
            if(destroyed) return;
            const w = window.innerWidth, h = window.innerHeight;
            const dx = (x - w/2)/(w/2), dy = (y - h/2)/(h/2);
            scene.style.transform = `rotateX(${dy*-10}deg) rotateY(${dx*10}deg)`;
            engine.world.gravity.x = dx*2; engine.world.gravity.y = 1 + dy*2;
            foil.style.backgroundPosition = `${50+dx*20}% ${50+dy*20}%`;
            grid.style.transform = `perspective(500px) rotateX(60deg) translate(${dx*-20}px, ${dy*-10}px)`;
        }
        document.addEventListener('mousemove', e => move(e.clientX, e.clientY));
        document.addEventListener('touchmove', e => { e.preventDefault(); move(e.touches[0].clientX, e.touches[0].clientY); }, {passive:false});

        // 4. 逻辑
        slider.addEventListener('input', e => {
            if(destroyed) return;
            const v = +e.target.value;
            document.getElementById('energy-val').innerText = v + '%';
            if(Math.random() < v/150) particles.forEach(p => Body.applyForce(p, p.position, {x:(Math.random()-.5)*.005, y:-.00015*v}));
            if(v >= 95 && !unstable) { unstable = true; card.classList.add('danger-mode'); statusTag.innerText="CRITICAL"; statusTag.style.color="var(--neon-red)"; statusTag.style.borderColor="var(--neon-red)"; particles.forEach(p=>p.render.fillStyle='#ff0055'); }
            else if(v < 95 && unstable) { unstable = false; card.classList.remove('danger-mode'); statusTag.innerText="STABLE"; statusTag.style.color="var(--neon-blue)"; statusTag.style.borderColor="var(--neon-blue)"; particles.forEach((p,i)=>p.render.fillStyle=colors[i%3]); }
        });

        card.addEventListener('click', e => {
            if(e.target === slider || destroyed) return;
            if(!unstable) { scene.style.transform += " scale(0.98)"; setTimeout(()=>scene.style.transform=scene.style.transform.replace(" scale(0.98)",""), 100); }
            else {
                destroyed = true; card.style.opacity = 0;
                const cont = document.getElementById('shatter-container'); cont.style.display='block';
                for(let i=0; i<50; i++) {
                    const s = document.createElement('div'); s.className='shard';
                    s.style.cssText = `width:${Math.random()*40+10}px; height:${Math.random()*40+10}px; left:${Math.random()*360}px; top:${Math.random()*520}px; clip-path:polygon(${Math.random()*100}% 0, 100% ${Math.random()*100}%, 0 100%);`;
                    cont.appendChild(s);
                    s.animate([{transform:'translate(0,0)', opacity:1}, {transform:`translate(${(Math.random()-.5)*800}px, ${(Math.random()-.5)*800}px) rotate(${Math.random()*360}deg)`, opacity:0}], {duration:1000, fill:'forwards'});
                }
                setTimeout(()=>{ reboot.classList.add('visible'); cont.innerHTML=''; }, 1500);
                setTimeout(()=>{ reboot.classList.remove('visible'); destroyed=false; unstable=false; card.classList.remove('danger-mode'); slider.value=20; card.style.opacity=1; cont.style.display='none'; statusTag.innerText="STABLE"; statusTag.style.color="var(--neon-blue)"; statusTag.style.borderColor="var(--neon-blue)"; particles.forEach((p,i)=>p.render.fillStyle=colors[i%3]); }, 4500);
            }
        });
    </script>
</body>
</html>